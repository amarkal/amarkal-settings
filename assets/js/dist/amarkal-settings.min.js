!function(a,b){var c;void 0===b.Amarkal?(c={},b.Amarkal=c):c=b.Amarkal,c.settings={init:function(){a(".amarkal-ui-component").on("amarkal.change",function(){c.settings.notifier.notice('Settings have changed, click "Save" to apply them.')})}},a(document).ready(function(){c.settings.init()}),c.settings.notifier={classes:["error","success","notice","info"],prefix:"amarkal-",timeout:null,$el:null,notify:function(a,b,d){clearTimeout(c.settings.notifier.timeout),c.settings.notifier.$el.removeAttr("class").addClass(c.settings.notifier.prefix+a).html("<p>"+b+"</p>"),void 0!==d&&(c.settings.notifier.timeout=setTimeout(function(){c.settings.notifier.$el.removeAttr("class").html("")},d))},error:function(a,b){c.settings.notifier.notify("error",a,b)},success:function(a,b){c.settings.notifier.notify("success",a,b)},notice:function(a,b){c.settings.notifier.notify("notice",a,b)},info:function(a,b){c.settings.notifier.notify("info",a,b)},init:function(){this.$el=a("#amarkal-settings-notices")}},a(document).ready(function(){c.settings.notifier.init()}),function(){var b=a(".amarkal-settings-field");a("#settings-search").on("keyup",function(c){var d=a(this).val().toLowerCase(),e=[];d.length>1?(b.hide().each(function(){var b=a(this);b.attr("data-title").toLowerCase().match(d)&&e.push(b)}),a(e).map(function(){return this.toArray()}).show(),a("#settings-search-results").text(e.length?e.length+" settings found":"Nothing found")):(b.show(),a("#settings-search-results").text(""))})}(),a(document).ready(function(){a(".amarkal-settings-button").on("click",function(b){b.preventDefault();var d=a(this);d.data("disabled")||(a(".amarkal-settings-button").data("disabled",!0),d.addClass("processing"),c.settings[d.val()](function(){d.removeClass("processing"),a(".amarkal-settings-button").data("disabled",!1)}))})}),c.settings.save=function(a){c.settings._postData("save",function(b){if(b.errors.length){for(var d="",e=0;e<b.errors.length;e++)d+=b.errors[e];c.settings.notifier.error(d)}else c.settings.notifier.success("Settings saved",2e3);c.settings._updateValues(b.values),a()})},c.settings.reset=function(a){c.settings._postData("reset",function(b){c.settings.notifier.success("Default settings applied",2e3),c.settings._updateValues(b.values),a()})},c.settings._updateValues=function(b){for(var c in b){var d=b[c],e=a('[amarkal-component-name="'+c+'"]');e.hasClass("amarkal-ui-component")&&e.amarkalUIcomponent("setValue",d)}},c.settings._postData=function(b,c){a.post(ajaxurl,{action:"amarkal_settings_"+b,data:a("#amarkal-settings-form").serialize()},c)}}(jQuery,window);